<?xml version="1.0" encoding="utf-8"?>

<ms2>

	<state name="준비">
        <onEnter> 
			<action name="이펙트를설정한다" arg1="500" arg2="0"/>	
			<action name="이펙트를설정한다" arg1="501" arg2="0"/>	
			<action name="이펙트를설정한다" arg1="502" arg2="0"/>				
			<action name="버프를삭제한다" arg1="9002" arg2="99910311" /><!-- 포탑으로변신 -->				
			<action name="몬스터소멸시킨다" arg1="all"/>
			<action name="VisibleMyPC" isVisible="0" /> <!-- 캐릭터 숨김-->			
		</onEnter>
		<condition name="유저를감지했으면" arg1="9002">
			<transition state="시작"/>
		</condition>
		<onExit> 
		</onExit>
    </state>
	
    <state name="시작" >
	    <onEnter>
			<action name="SetOnetimeEffect" id="1" enable="1" path="BG/Common/ScreenMask/Eff_CameraMasking_FastFadeIn.xml"/>		
			<action name="메쉬를설정한다" arg1="10000" arg2="1" /> <!-- 스폰 발판 생성-->
			<action name="메쉬를설정한다" arg1="10001" arg2="1" /> <!-- 공습용발판 생성-->				
			<action name="메쉬를설정한다" arg1="30000" arg2="1" /> <!-- 대포1 생성-->
			<action name="메쉬를설정한다" arg1="30001" arg2="1" /> <!-- 대포1 생성-->			
			<action name="메쉬를설정한다" arg1="30002" arg2="1" /> <!-- 대포1 생성-->			
			<action name="연출UI를설정한다" arg1="1"/>
			<action name="연출UI를설정한다" arg1="3"/>  			
			<action name="몬스터를생성한다" arg1="1" arg2="0" /> <!-- 함교 연출용 블리체-->		
			<action name="몬스터를생성한다" arg1="2" arg2="0" /> <!-- 함교 연출용 네이린-->		
			<action name="몬스터를생성한다" arg1="3" arg2="0" /> <!-- 함교 연출용 콘대르-->					
			<action name="몬스터를생성한다" arg1="4" arg2="0" /> <!-- 함교 연출용 메이슨-->	
			<action name="몬스터를생성한다" arg1="5" arg2="0" /> <!-- 함교 연출용 샤텐-->
			<action name="몬스터를생성한다" arg1="10000" arg2="0" /> <!-- 함교 연출용 해군-->	
			<action name="몬스터를생성한다" arg1="10001" arg2="0" /> <!-- 함교 연출용 해군-->	
			<action name="몬스터를생성한다" arg1="10002" arg2="0" /> <!-- 함교 연출용 해군-->				
			<action name="몬스터를생성한다" arg1="100" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="101" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="102" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="103" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="104" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="105" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="106" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="107" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="108" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="109" arg2="0" /> 			
			<action name="몬스터를생성한다" arg1="110" arg2="0" />
			<action name="몬스터를생성한다" arg1="111" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="112" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="113" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="114" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="115" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="116" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="117" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="118" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="119" arg2="0" /> 			
			<action name="몬스터를생성한다" arg1="120" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="121" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="122" arg2="0" /> 			
			<action name="몬스터를생성한다" arg1="123" arg2="0" /> 		
			<action name="유저를이동시킨다" arg1="52010055" arg2="1"/>		
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state="크림슨발록비춤1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
	
    <state name="크림슨발록비춤1" >
        <onEnter>
			<action name="SetOnetimeEffect" id="1" enable="0" path="BG/Common/ScreenMask/Eff_CameraMasking_FastFadeIn.xml"/>	
			<action name="메쉬를설정한다" arg1="10000" arg2="0" /> <!-- 스폰 발판 지움-->
			<action name="메쉬를설정한다" arg1="10001" arg2="0" /> <!-- 공습용발판 지움-->				
			<action name="SetSceneSkip" arg1="게임시작" arg2="nextState"/>				
			<action name="카메라를선택한다" arg1="4001" arg2="1"/>	
			<action name="AddCinematicTalk" npcID="11003781" illustID="" msg="$52010055_QD__52010055__0$" duration="3000" align="right" />			
			<action name="AddCinematicTalk" npcID="11003781" illustID="" msg="$52010055_QD__52010055__1$" duration="3000" align="right" />			
		</onEnter>	
		<condition name="WaitTick" waitTick="6000">
			<transition state="크림슨이동"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>

    <state name="크림슨이동" >
        <onEnter>
			<action name="AddCinematicTalk" npcID="29000378" illustID="" msg="$52010055_QD__52010055__2$" duration="3000" align="right"/>
			<action name="NPC를이동시킨다" arg1="101" arg2="PatrolDataBalrog_Open_101" />
			<action name="NPC를이동시킨다" arg1="102" arg2="PatrolDataBalrog_Open_102" />
			<action name="NPC를이동시킨다" arg1="103" arg2="PatrolDataBalrog_Open_103" />
			<action name="NPC를이동시킨다" arg1="104" arg2="PatrolDataBalrog_Open_104" />
			<action name="NPC를이동시킨다" arg1="105" arg2="PatrolDataBalrog_Open_105" />
			<action name="NPC를이동시킨다" arg1="106" arg2="PatrolDataBalrog_Open_106" />
			<action name="NPC를이동시킨다" arg1="107" arg2="PatrolDataBalrog_Open_107" /> 				
			<action name="NPC를이동시킨다" arg1="108" arg2="PatrolDataBalrog_Open_108" /> 	
			<action name="NPC를이동시킨다" arg1="109" arg2="PatrolDataBalrog_Open_109" /> 			
			<action name="NPC를이동시킨다" arg1="110" arg2="PatrolDataBalrog_Open_110" />
			<action name="NPC를이동시킨다" arg1="111" arg2="PatrolDataBalrog_Open_111" /> 	
			<action name="NPC를이동시킨다" arg1="112" arg2="PatrolDataBalrog_Open_112" /> 				
			<action name="NPC를이동시킨다" arg1="113" arg2="PatrolDataBalrog_Open_113" /> 	
			<action name="NPC를이동시킨다" arg1="114" arg2="PatrolDataBalrog_Open_114" /> 
			<action name="NPC를이동시킨다" arg1="115" arg2="PatrolDataBalrog_Open_115" /> 
			<action name="NPC를이동시킨다" arg1="116" arg2="PatrolDataBalrog_Open_116" /> 	
			<action name="NPC를이동시킨다" arg1="117" arg2="PatrolDataBalrog_Open_117" /> 				
			<action name="NPC를이동시킨다" arg1="118" arg2="PatrolDataBalrog_Open_118" /> 	
			<action name="NPC를이동시킨다" arg1="119" arg2="PatrolDataBalrog_Open_119" /> 			
			<action name="NPC를이동시킨다" arg1="120" arg2="PatrolDataBalrog_Open_120" /> 
			<action name="NPC를이동시킨다" arg1="121" arg2="PatrolDataBalrog_Open_121" /> 	
			<action name="NPC를이동시킨다" arg1="122" arg2="PatrolDataBalrog_Open_122" /> 			
			<action name="NPC를이동시킨다" arg1="123" arg2="PatrolDataBalrog_Open_123" /> 		
		</onEnter>	
		<condition name="WaitTick" waitTick="4000">
			<transition state="함교비춤1"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>
	
    <state name="함교비춤1" >
        <onEnter>
			<action name="몬스터소멸시킨다" arg1="101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123"/>		
			<action name="VisibleMyPC" isVisible="1" /> <!-- 캐릭터 보임-->			
			<action name="유저를이동시킨다" arg1="52010055" arg2="2"/>		
			<action name="카메라경로를선택한다" arg1="4002,4003" arg2="0"/>		
			<action name="SetNpcEmotionSequence" arg1="2" arg2="Talk_A" />			
	   		<action name="AddCinematicTalk" npcID="11003536" illustID="Neirin_surprise" msg="$52010055_QD__52010055__3$" duration="3000"  align="left"/>				
			<action name="AddCinematicTalk" npcID="11003682" illustID="Bliche_closeEye" msg="$52010055_QD__52010055__4$" duration="4000" align="Center"/>	
		</onEnter>	
		<condition name="WaitTick" waitTick="7000">
			<transition state="함교비춤2"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>

    <state name="함교비춤2" >
        <onEnter>
			<action name="SetNpcRotation" arg1="1" arg2="180" />		
			<action name="SetNpcEmotionSequence" arg1="1" arg2="Talk_A" />				
			<action name="AddCinematicTalk" npcID="11003533" illustID="Bliche_normal" msg="$52010055_QD__52010055__5$" duration="3000" align="right"/>
        </onEnter>	
		<condition name="WaitTick" waitTick="5000">
			<transition state="콘대르대사"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>

    <state name="콘대르대사" >
        <onEnter>
			<action name="SetNpcEmotionSequence" arg1="3" arg2="Talk_A" />		
			<action name="AddCinematicTalk" npcID="11003776" illustID="Conder_normal" msg="$52010055_QD__52010055__6$" duration="2000" align="left"/>			
        </onEnter>	
		<condition name="WaitTick" waitTick="2000">
			<transition state="콘대르이동"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>

    <state name="콘대르이동" >
        <onEnter>
			<action name="NPC를이동시킨다" arg1="3" arg2="PatrolDataOpenConder0" />
			<action name="SetNpcEmotionSequence" arg1="5" arg2="Talk_A" />				
			<action name="AddCinematicTalk" npcID="11003584" illustID="Schatten_normal" msg="$52010055_QD__52010055__7$" duration="2000"/>			
        </onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="샤텐이동"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>	

    <state name="샤텐이동" >
        <onEnter>
			<action name="NPC를이동시킨다" arg1="5" arg2="PatrolDataOpenSchatten0" />
			<action name="SetNpcEmotionSequence" arg1="4" arg2="Talk_A" />				
			<action name="AddCinematicTalk" npcID="11003586" illustID="Mason_closeEye" msg="$52010055_QD__52010055__8$" duration="3000" align="Left"/>
			<action name="몬스터소멸시킨다" arg1="3"/>					
        </onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="메이슨이동"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>		
	
    <state name="메이슨이동" >
        <onEnter>
			<action name="몬스터소멸시킨다" arg1="5"/>			
			<action name="NPC를이동시킨다" arg1="4" arg2="PatrolDataOpenMason0" />				
        </onEnter>	
		<condition name="WaitTick" waitTick="4000">
			<transition state="함교비춤3"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>		
	
    <state name="함교비춤3" >
        <onEnter>
			<action name="SetNpcRotation" arg1="1" arg2="270" />
			<action name="SetNpcEmotionSequence" arg1="1" arg2="Talk_A" />				
			<action name="AddCinematicTalk" npcID="11003533" illustID="Bliche_normal" msg="$52010055_QD__52010055__9$" duration="3000" align="right"/>
			<action name="몬스터소멸시킨다" arg1="4"/>				
		</onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="함교비춤4"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>
	
    <state name="함교비춤4" >
        <onEnter>
			<action name="SetNpcEmotionSequence" arg1="2" arg2="Talk_A" />				
			<action name="AddCinematicTalk" npcID="11003536" illustID="Neirin_surprise" msg="$52010055_QD__52010055__10$" duration="2000" align="left"/>
			<action name="SetNpcEmotionSequence" arg1="1" arg2="Talk_A" />
			<action name="SetNpcRotation" arg1="1" arg2="170" />			
			<action name="AddCinematicTalk" npcID="11003533" illustID="Bliche_normal" msg="$52010055_QD__52010055__11$" duration="3000" align="left"/>
		</onEnter>	
		<condition name="WaitTick" waitTick="5000">
			<transition state="함교비춤5"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>	

    <state name="함교비춤5" >
        <onEnter>
			<action name="SetPcEmotionSequence" arg1="Emotion_Calm_A" />			
			<action name="InitNpcRotation" arg1="1" />		
			<action name="SetNpcEmotionSequence" arg1="1" arg2="Talk_A" />
			<action name="AddCinematicTalk" npcID="11003533" illustID="Bliche_normal" msg="$52010055_QD__52010055__12$" duration="3000" align="Left"/>
			<action name="SetNpcEmotionSequence" arg1="2" arg2="Talk_A" />		
			<action name="AddCinematicTalk" npcID="11003536" illustID="Neirin_surprise" msg="$52010055_QD__52010055__13$" duration="3000" align="Right"/>
			<action name="SetNpcEmotionSequence" arg1="1" arg2="Talk_A" />			
			<action name="AddCinematicTalk" npcID="11003533" illustID="Bliche_normal" msg="$52010055_QD__52010055__14$" duration="2000" align="right"/>
			<action name="AddCinematicTalk" npcID="11003682" illustID="Bliche_closeEye" msg="$52010055_QD__52010055__15$" duration="2000" align="right"/>
			<action name="AddCinematicTalk" npcID="11003533" illustID="Bliche_normal" msg="$52010055_QD__52010055__16$" duration="2000" align="right"/>			
			<action name="SetSceneSkip" arg1="" arg2=""/>	 
		</onEnter>	
		<condition name="WaitTick" waitTick="12000">
			<transition state="게임시작"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>
	
    <state name="게임시작" >
        <onEnter>
			<action name="메쉬를설정한다" arg1="10002,10003,10004,10005" arg2="1" /> <!-- 1차 전투 링-->
			<action name="카메라경로를선택한다" arg1="4003,4019" arg2="0"/>				
			<action name="VisibleMyPC" isVisible="1" /> <!-- 캐릭터 보임-->		
			<action name="카메라리셋" interpolationTime="0"/>		
			<action name="유저를이동시킨다" arg1="52010055" arg2="3"/>				
			<action name="SetLocalCamera" cameraId="9009" enable="1"/>	
			<action name="SetOnetimeEffect" id="2" enable="0" path="BG/Common/ScreenMask/Eff_CameraMasking_SlowFade.xml"/>
			<action name="SideNpcTalk" npcID="11003533" illust="Bliche_closeEye" duration="3000" script="$52010055_QD__52010055__17$" voice="ko/Npc/00002154"/>		 			
			<action name="연출UI를설정한다" arg1="0"/>
			<action name="연출UI를설정한다" arg1="2"/>  
			<action name="몬스터소멸시킨다" arg1="all"/>			
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state="1차발록스피어스폰"/>
		</condition> 		
		<onExit> 			
        </onExit>
    </state>
	
    <state name="1차발록스피어스폰" >
        <onEnter>
			<action name="카메라를선택한다" arg1="4019" arg2="1"/>			
			<action name="메쉬를설정한다" arg1="10000" arg2="0" /> <!-- 스폰 발판 제거-->
			<action name="몬스터를생성한다" arg1="1" arg2="0" /> <!-- 함교 연출용 블리체-->		
			<action name="몬스터를생성한다" arg1="2" arg2="0" /> <!-- 함교 연출용 네이린-->
			<action name="몬스터를생성한다" arg1="10000" arg2="0" /> <!-- 함교 연출용 해군-->	
			<action name="몬스터를생성한다" arg1="10001" arg2="0" /> <!-- 함교 연출용 해군-->	
			<action name="몬스터를생성한다" arg1="10002" arg2="0" /> <!-- 함교 연출용 해군-->			
			<action name="몬스터를생성한다" arg1="1000" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="1001" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="1002" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="1003" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="1004" arg2="0" /> 
        </onEnter>	
        <condition name="몬스터가죽어있으면"  arg1="1000,1001,1002,1003,1004">
			<transition state="2차발록스피어스폰"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
	
    <state name="2차발록스피어스폰" >
        <onEnter>
			<action name="몬스터를생성한다" arg1="1005" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="1006" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="1007" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="1008" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="1009" arg2="0" /> 
        </onEnter>	
        <condition name="몬스터가죽어있으면"  arg1="1005,1006,1007,1008,1009">
			<transition state="3차발록스피어스폰"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>

	<state name="3차발록스피어스폰" >
        <onEnter>
			<action name="몬스터를생성한다" arg1="1010" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="1011" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="1012" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="1013" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="1014" arg2="0" /> 
        </onEnter>	
        <condition name="몬스터가죽어있으면"  arg1="1010,1011,1012,1013,1014">
			<transition state="1차크림슨스폰"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>		
	
	<state name="1차크림슨스폰" >
        <onEnter>
			<action name="몬스터를생성한다" arg1="200" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="201" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="202" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="203" arg2="0" /> 	

        </onEnter>	
        <condition name="몬스터가죽어있으면"  arg1="200,201,202,203">
			<transition state="2차크림슨스폰"/>
		</condition>
    </state>
	
	<state name="2차크림슨스폰" >
        <onEnter>
	
			<action name="몬스터를생성한다" arg1="204" arg2="0" />
			<action name="몬스터를생성한다" arg1="205" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="206" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="207" arg2="0" /> 
        </onEnter>	
        <condition name="몬스터가죽어있으면"  arg1="204,205,206,207">
			<transition state="3차크림슨스폰"/>
		</condition>
    </state>	

	<state name="3차크림슨스폰" >
        <onEnter>
			<action name="몬스터를생성한다" arg1="1005" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="1006" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="1007" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="1008" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="1009" arg2="0" /> 		
			<action name="몬스터를생성한다" arg1="209" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="210" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="211" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="212" arg2="0" /> 	
        </onEnter>	
        <condition name="몬스터가죽어있으면"  arg1="1005,1006,1007,1008,1009,209,210,211,212">
            <transition state="4차크림슨스폰" />
        </condition>
    </state>


	<state name="4차크림슨스폰" >
        <onEnter>
			<action name="몬스터를생성한다" arg1="1010" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="1011" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="1012" arg2="0" /> 				
			<action name="몬스터를생성한다" arg1="1013" arg2="0" /> 	
			<action name="몬스터를생성한다" arg1="1014" arg2="0" /> 		
			<action name="몬스터를생성한다" arg1="213" arg2="0" />
			<action name="몬스터를생성한다" arg1="214" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="215" arg2="0" /> 
			<action name="몬스터를생성한다" arg1="216" arg2="0" /> 
        </onEnter>	
        <condition name="몬스터가죽어있으면"  arg1="1010,1011,1012,1013,1014,213,214,215,216">
            <transition state="보스전연출준비" />
        </condition>
    </state>
	
<!--	<state name="공습준비대사1">
        <onEnter>
			<action name="몬스터소멸시킨다" arg1="All"/>
			<action name="연출UI를설정한다" arg1="0"/>
			<action name="연출UI를설정한다" arg1="2"/>  			
			<action name="SideNpcTalk" npcID="11003536" illust="Neirin_surprise" duration="4000" script="$52010055_QD__52010055__18$"/>
			<action name="SideNpcTalk" npcID="11003536" illust="Neirin_surprise" duration="3000" script="$52010055_QD__52010055__19$"/>
			<action name="SideNpcTalk" npcID="11003536" illust="Neirin_surprise" duration="3000" script="$52010055_QD__52010055__20$"/>			
 	    </onEnter>
		<condition name="WaitTick" waitTick="10000">
			<transition state="공습준비연출2"/>
        </condition>
    </state>
	
	<state name="공습준비연출1">
        <onEnter>
			<action name="VisibleMyPC" isVisible="1" />		
			<action name="몬스터소멸시킨다" arg1="All"/>
			<action name="메쉬를설정한다" arg1="10002,10003,10004,10005" arg2="1" /> 				
 	    </onEnter>
		<condition name="WaitTick" waitTick="1000">
			<transition state="공습준비연출2"/>
        </condition>
    </state>

	<state name="공습준비연출2">
        <onEnter>
			<action name="연출UI를설정한다" arg1="3"/>
			<action name="연출UI를설정한다" arg1="1"/>  		
			<action name="몬스터를생성한다" arg1="999" arg2="0" /> \	
			<action name="카메라경로를선택한다" arg1="4020,4021,4022" arg2="0"/>	
			<action name="유저를이동시킨다" arg1="52010055" arg2="6" />
	    </onEnter>
		<condition name="WaitTick" waitTick="1000">
			<transition state="공습준비연출3"/>
        </condition>
    </state>	
 
	<state name="공습준비연출3">
        <onEnter>
			<action name="유저를경로이동시킨다" arg1="PatrolDataCannon" />	
 	    </onEnter>
		<condition name="WaitTick" waitTick="2000">
			<transition state="공습준비연출4"/>
        </condition>
    </state>	

	<state name="공습준비연출4">
        <onEnter>
			<action name="유저를이동시킨다" arg1="52010055" arg2="7" />
 	    </onEnter>
		<condition name="WaitTick" waitTick="1000">
			<transition state="공습준비"/>
        </condition>
    </state>	
	
	
	<state name="공습준비">
        <onEnter>
			<action name="메쉬를설정한다" arg1="30000" arg2="0" />			
			<action name="버프를걸어준다" arg1="9002" arg2="99910311" arg3="1" arg4="0" arg5="0" />
 	    </onEnter>
		<condition name="WaitTick" waitTick="1000">
			<transition state="공습1"/>
        </condition>
    </state>	
	
	<state name="공습1">
        <onEnter>
			<action name="연출UI를설정한다" arg1="0"/>
			<action name="연출UI를설정한다" arg1="2"/>  	
			<action name="몬스터를생성한다" arg1="600" arg2="0" arg3="0" /> 
			<action name="몬스터를생성한다" arg1="601" arg2="0" arg3="0" /> 	
			<action name="몬스터를생성한다" arg1="602" arg2="0" arg3="0" />
        </onEnter>
		<condition name="WaitTick" waitTick="2000">
			<transition state="공습1이동"/>
        </condition>
		<onExit> 		
        </onExit>
    </state>
	
	<state name="공습1이동">
        <onEnter>
			<action name="NPC를이동시킨다" arg1="600" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="601" arg2="PatrolDataBridge0" />					
			<action name="NPC를이동시킨다" arg1="602" arg2="PatrolDataBridge0" />
        </onEnter>
		<condition name="WaitTick" waitTick="2000">
			<transition state="공습2"/>
        </condition>
		<onExit> 		
        </onExit>
    </state>	
	
	<state name="공습2">
        <onEnter>
			<action name="몬스터를생성한다" arg1="500" arg2="1" arg3="0" /> 
			<action name="몬스터를생성한다" arg1="501" arg2="1" arg3="0" /> 	
			<action name="몬스터를생성한다" arg1="502" arg2="1" arg3="0" />
        </onEnter>
		<condition name="WaitTick" waitTick="2000">
			<transition state="공습2이동"/>
		</condition>	
    </state>
	
	<state name="공습2이동">
        <onEnter>
			<action name="NPC를이동시킨다" arg1="500" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="501" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="502" arg2="PatrolDataBridge0" />
        </onEnter>
		<condition name="WaitTick" waitTick="2000">
			<transition state="공습3"/>
		</condition>	
    </state>		

	<state name="공습3">
        <onEnter>
			<action name="몬스터를생성한다" arg1="400" arg2="1" arg3="0" /> 
			<action name="몬스터를생성한다" arg1="401" arg2="1" arg3="0" /> 	
			<action name="몬스터를생성한다" arg1="402" arg2="1" arg3="0" />
        </onEnter>			
		<condition name="WaitTick" waitTick="2000">
			<transition state="공습3이동"/>
		</condition>
    </state>		

	<state name="공습3이동">
        <onEnter>		
			<action name="NPC를이동시킨다" arg1="400" arg2="PatrolDataBridge0" />	
			<action name="NPC를이동시킨다" arg1="401" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="402" arg2="PatrolDataBridge0" />
		</onEnter>
		<condition name="몬스터가죽어있으면" arg1="999">
			<transition state="실패선언"/>					
		</condition>
		<condition name="몬스터가죽어있으면" arg1="600,601,602,500,501,502,400,401,402">
			<transition state="공습4"/>
		</condition>	
    </state>
	
	<state name="공습4">
        <onEnter>
			<action name="몬스터를생성한다" arg1="400" arg2="1" arg3="0" /> 
			<action name="몬스터를생성한다" arg1="401" arg2="1" arg3="0" /> 	
			<action name="몬스터를생성한다" arg1="402" arg2="1" arg3="0" />			
			<action name="몬스터를생성한다" arg1="500" arg2="1" arg3="0" /> 
			<action name="몬스터를생성한다" arg1="501" arg2="1" arg3="0" /> 	
			<action name="몬스터를생성한다" arg1="502" arg2="1" arg3="0" />
			<action name="몬스터를생성한다" arg1="600" arg2="1" arg3="0" /> 
			<action name="몬스터를생성한다" arg1="601" arg2="1" arg3="0" /> 	
			<action name="몬스터를생성한다" arg1="602" arg2="1" arg3="0" />
        </onEnter>
		<condition name="WaitTick" waitTick="2000">
			<transition state="공습4이동"/>
		</condition>	
		<onExit> 		
        </onExit>
    </state>

	<state name="공습4이동">
        <onEnter>
			<action name="NPC를이동시킨다" arg1="400" arg2="PatrolDataBridge0" />	
			<action name="NPC를이동시킨다" arg1="401" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="402" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="500" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="501" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="502" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="600" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="601" arg2="PatrolDataBridge0" />					
			<action name="NPC를이동시킨다" arg1="602" arg2="PatrolDataBridge0" />					
        </onEnter>
		<condition name="몬스터가죽어있으면"  arg1="999">
			<transition state="준비"/>	
		</condition>
        <condition name="몬스터가죽어있으면"  arg1="600,601,602,500,501,502,400,401,402">
			<transition state="공습5"/>
		</condition>	
		<onExit> 		
        </onExit>
    </state>		
	
	<state name="공습5">
        <onEnter>
			<action name="몬스터를생성한다" arg1="500" arg2="1" arg3="0" /> 
			<action name="몬스터를생성한다" arg1="501" arg2="1" arg3="0" /> 	
			<action name="몬스터를생성한다" arg1="502" arg2="1" arg3="0" />
			<action name="몬스터를생성한다" arg1="600" arg2="1" arg3="0" /> 
			<action name="몬스터를생성한다" arg1="601" arg2="1" arg3="0" /> 	
			<action name="몬스터를생성한다" arg1="602" arg2="1" arg3="0" />			
			<action name="몬스터를생성한다" arg1="400" arg2="1" arg3="0" /> 
			<action name="몬스터를생성한다" arg1="401" arg2="1" arg3="0" /> 	
			<action name="몬스터를생성한다" arg1="402" arg2="1" arg3="0" />
        </onEnter>
		<condition name="WaitTick" waitTick="2000">
			<transition state="공습5이동"/>
		</condition>	
		<onExit> 		
        </onExit>
    </state>
	
	<state name="공습5이동">
        <onEnter>
			<action name="NPC를이동시킨다" arg1="400" arg2="PatrolDataBridge0" />	
			<action name="NPC를이동시킨다" arg1="401" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="402" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="500" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="501" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="502" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="600" arg2="PatrolDataBridge0" />
			<action name="NPC를이동시킨다" arg1="601" arg2="PatrolDataBridge0" />					
			<action name="NPC를이동시킨다" arg1="602" arg2="PatrolDataBridge0" />	
        </onEnter>
        <condition name="몬스터가죽어있으면"  arg1="999">
			<transition state="실패선언"/>
		</condition>			
		<condition name="몬스터가죽어있으면"  arg1="600,601,602,500,501,502,400,401,402">
			<transition state="공습종료"/>
		</condition>	
		<onExit> 		
        </onExit>
    </state>
	
	<state name="공습종료">
        <onEnter>
			<action name="몬스터소멸시킨다" arg1="All"/>	
        </onEnter>
		<condition name="WaitTick" waitTick="1000">
			<transition state="보스전연출준비"/>
		</condition>	
		<onExit> 		
        </onExit>
    </state> -->	

    <state name="보스전연출준비" >
        <onEnter>
			<action name="SetOnetimeEffect" id="4" enable="1" path="BG/Common/ScreenMask/Eff_CameraMasking_FastFadeIn.xml"/> <!-- 암전 -->				
			<action name="VisibleMyPC" isVisible="1" /> <!-- 캐릭터 보임-->
			<action name="유저를이동시킨다" arg1="52010055" arg2="4" />				
			<action name="버프를삭제한다" arg1="9002" arg2="99910311" /><!-- 포탑으로변신 -->		
			<action name="카메라리셋" interpolationTime="0"/>
			<action name="메쉬를설정한다" arg1="10002,10003,10004,10005" arg2="1" /> <!-- 1차 전투 링생성-->			
			<action name="연출UI를설정한다" arg1="1"/>
			<action name="연출UI를설정한다" arg1="3"/>  			
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state="보스전연출시작"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>	
	
    <state name="보스전연출시작" >
        <onEnter>
			<action name="SetOnetimeEffect" id="4" enable="0" path="BG/Common/ScreenMask/Eff_CameraMasking_FastFadeIn.xml"/> <!-- 암전 -->			
			<action name="카메라를선택한다" arg1="4006" arg2="1"/>				
			<action name="몬스터를생성한다" arg1="1" arg2="0" /> <!-- 함교 연출용 블리체 -->
			<action name="몬스터를생성한다" arg1="2" arg2="0" /> <!-- 함교 연출용 네이린 -->				
			<action name="몬스터를생성한다" arg1="2000" arg2="0" /> <!-- 연출용 보스소환 -->		
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state="보스전연출1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
	
    <state name="보스전연출1" >
        <onEnter>
			<action name="SetNpcEmotionSequence" arg1="2000" arg2="Attack_01_A" />
			<action name="AddCinematicTalk" npcID="29000382" illustID="" msg="$52010055_QD__52010055__21$" duration="3000" align="right"/>
			<action name="SetPcEmotionSequence" arg1="Emotion_Suprise_A" />			
        </onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="보스전시작"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
	
    <state name="보스전시작">
        <onEnter>
			<action name="카메라를선택한다" arg1="4019" arg2="1"/>			
			<action name="몬스터소멸시킨다" arg1="2000"/>			
			<action name="몬스터를생성한다" arg1="2001" arg2="1" /> <!-- 전투용 보스 소환 -->
			<action name="연출UI를설정한다" arg1="0"/>
			<action name="연출UI를설정한다" arg1="2"/>  
        </onEnter>	
        <condition name="몬스터가죽어있으면" arg1="2001">			
			<transition state="보스사망체크"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
	
    <state name="보스사망체크">
        <onEnter>
			<action name="VisibleMyPC" isVisible="1" /> <!-- 캐릭터 보임-->			
			<action name="SetOnetimeEffect" id="5" enable="1" path="BG/Common/ScreenMask/Eff_CameraMasking_FastFadeIn.xml"/> <!-- 암전 -->			
			<action name="몬스터소멸시킨다" arg1="all"/>			
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">	
			<transition state="보스전끝크림슨발록대사1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>

    <state name="보스전끝크림슨발록대사1">
        <onEnter>
			<action name="SetOnetimeEffect" id="5" enable="0" path="BG/Common/ScreenMask/Eff_CameraMasking_FastFadeIn.xml"/> <!-- 암전 -->				
			<action name="메쉬를설정한다" arg1="10002,10003,10004,10005" arg2="0" /> <!-- 1차 전투 링 해제-->			
			<action name="연출UI를설정한다" arg1="1"/>
			<action name="연출UI를설정한다" arg1="3"/>  				
			<action name="몬스터를생성한다" arg1="1" arg2="0" /> <!-- 함교 연출용 블리체 -->
			<action name="몬스터를생성한다" arg1="2" arg2="0" /> <!-- 함교 연출용 네이린 -->	
			<action name="몬스터를생성한다" arg1="13" arg2="0" /> <!-- 엔딩 연출용 콘대르 -->
			<action name="몬스터를생성한다" arg1="14" arg2="0" /> <!-- 엔딩 연출용 메이슨 -->	
			<action name="몬스터를생성한다" arg1="15" arg2="0" /> <!-- 엔딩 연출용 샤텐 -->				
			<action name="몬스터를생성한다" arg1="2002" arg2="0" /> <!-- 연출용 보스소환 -->				
			<action name="유저를이동시킨다" arg1="52010055" arg2="5"/>	<!-- 스카이 포트리스 작전실로 텔레포트 -->
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state="엔딩연출크림슨발록보스1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>		
	
    <state name="엔딩연출크림슨발록보스1">
        <onEnter>
			<action name="SetNpcRotation" arg1="14" arg2="-10" />			
			<action name="SetNpcRotation" arg1="15" arg2="10" />			
			<action name="카메라를선택한다" arg1="4006" arg2="1"/>	
			<action name="유저를경로이동시킨다" arg1="PatrolDataEndPC0" />	<!-- 유저 보스잡고 걸어감 -->					
			<action name="SetNpcEmotionSequence" arg1="2002" arg2="Dead_01_A" />
			<action name="AddCinematicTalk" npcID="29000382" illustID="" msg="$52010055_QD__52010055__22$" duration="3000" align="right"/>				
        </onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="엔딩연출크림슨발록보스2"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>

    <state name="엔딩연출크림슨발록보스2"> <!-- 콘대르 샤텐 메이슨 등장 -->
        <onEnter>
			<action name="몬스터를변경한다" arg1="2002" arg2="2003" /> <!-- 함교 연출용 블리체 -->
			<action name="SetNpcEmotionSequence" arg1="2003" arg2="Dead_01_A" />			
			<action name="SetSceneSkip" arg1="맵이동" arg2="nextState"/>		
			<action name="카메라경로를선택한다" arg1="4007,4008" arg2="0"/>			
			<action name="VisibleMyPC" isVisible="0" /> <!-- 캐릭터 숨김-->				
			<action name="SetNpcEmotionSequence" arg1="13" arg2="Attack_Idle_A,Attack_Idle_A,Attack_Idle_A,Attack_Idle_A" />
			<action name="SetNpcEmotionSequence" arg1="14" arg2="Attack_Idle_A,Attack_Idle_A,Attack_Idle_A,Attack_Idle_A" />
			<action name="SetNpcEmotionSequence" arg1="15" arg2="Attack_Idle_A,Attack_Idle_A,Attack_Idle_A,Attack_Idle_A" />			
			<action name="AddCinematicTalk" npcID="11003776" illustID="Conder_normal" msg="$52010055_QD__52010055__23$" duration="2000" align="right"/>
        </onEnter>	
		<condition name="WaitTick" waitTick="2000">
			<transition state="엔딩연출샤텐1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>	

    <state name="엔딩연출샤텐1"> <!-- 사텐 사격 -->
	
        <onEnter>
			<action name="몬스터소멸시킨다" arg1="2002"/>	
			<action name="SetNpcEmotionSequence" arg1="13" arg2="Attack_Idle_A" />
			<action name="SetNpcEmotionSequence" arg1="14" arg2="Attack_Idle_A" />
			<action name="SetNpcEmotionSequence" arg1="15" arg2="Attack_Idle_A" />		
			<action name="AddCinematicTalk" npcID="11003584" illustID="Schatten_normal" msg="$52010055_QD__52010055__24$" duration="3000"/>		
			<action name="카메라경로를선택한다" arg1="4009,4010" arg2="0"/>
			<action name="카메라를선택한다" arg1="4010" arg2="1"/>				
			<action name="SetNpcEmotionSequence" arg1="15" arg2="Attack_Idle_A,Attack_01_A" />
        </onEnter>	
		<condition name="WaitTick" waitTick="2500">
			<transition state="엔딩연출메이슨1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>		

    <state name="엔딩연출메이슨1"> <!-- 메이슨 검무 -->
        <onEnter>		
			<action name="AddCinematicTalk" npcID="11003586" illustID="Mason_closeEye" msg="$52010055_QD__52010055__25$" duration="1500"/>		
			<action name="카메라를선택한다" arg1="4014" arg2="1"/>				
			<action name="카메라경로를선택한다" arg1="4014,4015" arg2="0"/>
			<action name="SetNpcEmotionSequence" arg1="13" arg2="Attack_Idle_A" />
			<action name="SetNpcEmotionSequence" arg1="14" arg2="Attack_Idle_A,Attack_01_A" />
        </onEnter>	
		<condition name="WaitTick" waitTick="2500">
			<transition state="엔딩연출콘대르1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>

    <state name="엔딩연출콘대르1"> <!-- 콘대르 돌진 -->
        <onEnter>
			<action name="이펙트를설정한다" arg1="500" arg2="1"/>	
			<action name="이펙트를설정한다" arg1="501" arg2="1"/>					
			<action name="AddCinematicTalk" npcID="11003776" illustID="Conder_normal" msg="$52010055_QD__52010055__26$" duration="3000"/>			
			<action name="카메라경로를선택한다" arg1="4016,4017" arg2="0"/>
			<action name="NPC를이동시킨다" arg1="13" arg2="PatrolDataCondorAttack1" /> <!-- 엔딩 연출용 콘대르 돌진 -->	
		</onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="엔딩연출콘대르2"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>	

    <state name="엔딩연출콘대르2"> <!-- 콘대르 돌진2 -->
        <onEnter>
			<action name="카메라를선택한다" arg1="4006" arg2="1" />
			<action name="이펙트를설정한다" arg1="5000" arg2="1" />
			<action name="이펙트를설정한다" arg1="5000" arg2="1" />
			<action name="이펙트를설정한다" arg1="502" arg2="1"/>				
			<action name="SetNpcEmotionSequence" arg1="13" arg2="Attack_01_G,Attack_02_G,Attack_03_G,Attack_06_G" />
			<action name="SetNpcEmotionSequence" arg1="2003" arg2="Stun_A,Stun_A,Stun_A" />				
        </onEnter>	
		<condition name="WaitTick" waitTick="3002">
			<transition state="엔딩연출클림슨발록사망1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
	
    <state name="엔딩연출클림슨발록사망1">
        <onEnter>
			<action name="SetNpcEmotionSequence" arg1="2003" arg2="Dead_01_A" />		
			<action name="AddCinematicTalk" npcID="29000382" illustID="" msg="$52010055_QD__52010055__27$" duration="3000" align="right"/><!-- 크아악 -->		
        </onEnter>	
		<condition name="WaitTick" waitTick="2000">
			<transition state="엔딩연출준비1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>

   <state name="엔딩연출준비1"> 
        <onEnter>
			<action name="SetOnetimeEffect" id="6" enable="1" path="BG/Common/ScreenMask/Eff_CameraMasking_FastFadeIn.xml"/> <!-- 암전 -->			
			<action name="몬스터소멸시킨다" arg1="2003" arg2="0"/> <!-- 엔딩연출용크림슨발록 -->	
			<action name="몬스터소멸시킨다" arg1="13" /> <!-- 엔딩 연출용 콘대르 -->				
			<action name="몬스터소멸시킨다" arg1="14" /> <!-- 엔딩 연출용 콘대르 -->	
			<action name="몬스터소멸시킨다" arg1="15" /> <!-- 엔딩 연출용 콘대르 -->				
			<action name="유저를이동시킨다" arg1="52010055" arg2="5"/>				
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state="엔딩연출준비2"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
	
   <state name="엔딩연출준비2"> 
        <onEnter>
        </onEnter>				
		<condition name="WaitTick" waitTick="1000">
			<transition state="크림슨대사준비1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
<!--	
   <state name="엔딩연출크림슨발록대사1">
        <onEnter>
			<action name="VisibleMyPC" isVisible="1" />		
			<action name="카메라를선택한다" arg1="4006" arg2="1" />
			<action name="AddCinematicTalk" npcID="29000382" illustID="" msg="$52010055_QD__52010055__28$" duration="3000" align="right"/>
        </onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="크림슨대사준비1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state> -->

   <state name="크림슨대사준비1"> 
        <onEnter>
			<action name="몬스터를생성한다" arg1="700" arg2="0" />	
			<action name="몬스터를생성한다" arg1="701" arg2="0" />					
			<action name="몬스터를생성한다" arg1="702" arg2="0" />
			<action name="몬스터를생성한다" arg1="703" arg2="0" />					
			<action name="몬스터를생성한다" arg1="704" arg2="0" />	
			<action name="몬스터를생성한다" arg1="705" arg2="0" />					
			<action name="몬스터를생성한다" arg1="706" arg2="0" />					
			<action name="몬스터를생성한다" arg1="707" arg2="0" />			
			<action name="VisibleMyPC" isVisible="0" /> <!-- 캐릭터 숨김-->		
			<action name="유저를이동시킨다" arg1="52010055" arg2="7"/>	<!-- 유저를 포탑으로 텔레포트-->		
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state="엔딩연출크림슨카메라1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
	
   <state name="엔딩연출크림슨카메라1"> 
        <onEnter>
			<action name="SetOnetimeEffect" id="6" enable="0" path="BG/Common/ScreenMask/Eff_CameraMasking_FastFadeIn.xml"/><!-- 암전 -->	
			<action name="카메라를선택한다" arg1="4023" arg2="1" />				
        </onEnter>	
		<condition name="WaitTick" waitTick="2000">
			<transition state="엔딩연출크림슨대사1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
   <state name="엔딩연출크림슨대사1"> 
        <onEnter>
			<action name="AddCinematicTalk" npcID="29000378" illustID="" msg="$52010055_QD__52010055__29$" duration="3000" align="right"/>
			<action name="NPC를이동시킨다" arg1="700" arg2="PatrolData700" /> <!-- 엔딩 연출용 크림슨도망 -->
			<action name="NPC를이동시킨다" arg1="701" arg2="PatrolData701" /> <!-- 엔딩 연출용 크림슨도망 -->
			<action name="NPC를이동시킨다" arg1="702" arg2="PatrolData702" /> <!-- 엔딩 연출용 크림슨도망 -->	
			<action name="NPC를이동시킨다" arg1="703" arg2="PatrolData703" /> <!-- 엔딩 연출용 크림슨도망 -->	
			<action name="NPC를이동시킨다" arg1="704" arg2="PatrolData704" /> <!-- 엔딩 연출용 크림슨도망 -->	
			<action name="NPC를이동시킨다" arg1="705" arg2="PatrolData705" /> <!-- 엔딩 연출용 크림슨도망 -->	
			<action name="NPC를이동시킨다" arg1="706" arg2="PatrolData706" /> <!-- 엔딩 연출용 크림슨도망 -->				
			<action name="NPC를이동시킨다" arg1="707" arg2="PatrolData707" /> <!-- 엔딩 연출용 크림슨도망 -->			
        </onEnter>	
		<condition name="WaitTick" waitTick="2000">
			<transition state="엔딩이동준비1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>
	
   <state name="엔딩이동준비1"> 
        <onEnter>
			<action name="연출UI를설정한다" arg1="3"/>
			<action name="연출UI를설정한다" arg1="1"/>		
			<action name="몬스터소멸시킨다" arg1="All" /> 		
			<action name="유저를이동시킨다" arg1="52010055" arg2="8" arg3="9002"/>	
			<action name="VisibleMyPC" isVisible="1" /> <!-- 캐릭터 보임-->			
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state="엔딩이동준비2"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>	

   <state name="엔딩이동준비2"> 
        <onEnter>
			<action name="카메라를선택한다" arg1="4024" arg2="1" />		
			<action name="몬스터를생성한다" arg1="1" arg2="0" /> <!-- 함교 연출용 블리체-->		
			<action name="몬스터를생성한다" arg1="2" arg2="0" /> <!-- 함교 연출용 네이린-->		
			<action name="몬스터를생성한다" arg1="13" arg2="0" /> <!-- 함교 연출용 콘대르-->	
			<action name="몬스터를생성한다" arg1="14" arg2="0" /> <!-- 함교 연출용 블리체-->		
			<action name="몬스터를생성한다" arg1="15" arg2="0" /> <!-- 함교 연출용 네이린-->		
			<action name="몬스터를생성한다" arg1="10001" arg2="0" /> <!-- 함교 연출용 해군-->	
			<action name="몬스터를생성한다" arg1="10002" arg2="0" /> <!-- 함교 연출용 해군-->			
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state="엔딩NPC이동1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>	
		
	<state name="엔딩NPC이동1"> 
        <onEnter>
			<action name="유저를경로이동시킨다" arg1="PatrolDataEndPC2" />	<!-- 엔딩 연출용 유저 이동 -->				
			<action name="NPC를이동시킨다" arg1="13" arg2="PatrolDataEndCondor1" /> <!-- 엔딩 연출용 콘대르 이동 -->	
			<action name="NPC를이동시킨다" arg1="14" arg2="PatrolDataEndMason1" /> <!-- 엔딩 연출용 메이슨 이동 -->	
			<action name="NPC를이동시킨다" arg1="15" arg2="PatrolDataEndSchatten1" /> <!-- 엔딩 연출용 샤텐 이동 -->				
        </onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="엔딩대사콘대르1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>	
	
   <state name="엔딩대사콘대르1"> 
        <onEnter>
			<action name="SetNpcRotation" arg1="15" arg2="60" />			
			<action name="SetNpcRotation" arg1="14" arg2="330" />		
			<action name="SetNpcEmotionSequence" arg1="13" arg2="Talk_A" />
			<action name="AddCinematicTalk" npcID="11003776" illustID="Conder_normal" msg="$52010055_QD__52010055__30$" duration="3000" align="Left"/>				
        </onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="엔딩대사샤텐1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>	

   <state name="엔딩대사샤텐1"> 
        <onEnter>
			<action name="SetNpcEmotionSequence" arg1="15" arg2="Talk_A" />
			<action name="AddCinematicTalk" npcID="11003584" illustID="Schatten_normal" msg="$52010055_QD__52010055__31$" duration="3000" align="Left"/>
        </onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="엔딩대사메이슨1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>

   <state name="엔딩대사메이슨1"> 
        <onEnter>
			<action name="메쉬를설정한다" arg1="10000" arg2="0" />		
			<action name="메쉬를설정한다" arg1="10001" arg2="0" />
			<action name="메쉬를설정한다" arg1="10002" arg2="0" />
			<action name="메쉬를설정한다" arg1="10003" arg2="0" />
			<action name="메쉬를설정한다" arg1="10004" arg2="0" />			
			<action name="SetNpcEmotionSequence" arg1="14" arg2="Talk_A" />
			<action name="AddCinematicTalk" npcID="11003586" illustID="Mason_closeEye" msg="$52010055_QD__52010055__32$" duration="3000" align="Left"/>
        </onEnter>	
		<condition name="WaitTick" waitTick="3000">
			<transition state="함교로카메라전환1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>	

   <state name="함교로카메라전환1"> 
        <onEnter>
			<action name="카메라를선택한다" arg1="4025" arg2="1" />		
			<action name="VisibleMyPC" isVisible="0" /> <!-- 캐릭터 숨김-->				
			<action name="유저를이동시킨다" arg1="52010055" arg2="2" />	<!-- 함교 내부로 텔레포트-->			
			<action name="SetOnetimeEffect" id="10" enable="0" path="BG/Common/ScreenMask/Eff_CameraMasking_SlowFade.xml"/> 				
        </onEnter>	
		<condition name="WaitTick" waitTick="300">
			<transition state="엔딩대사네이린1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>

   <state name="엔딩대사네이린1"> 
        <onEnter>
			<action name="SetNpcEmotionSequence" arg1="22" arg2="Talk_A" />
			<action name="AddCinematicTalk" npcID="11003536" illustID="Neirin_normal" msg="$52010055_QD__52010055__33$" duration="4000" align="right"/>
			<action name="AddCinematicTalk" npcID="11003536" illustID="Neirin_normal" msg="$52010055_QD__52010055__34$" duration="4000" align="right"/>
        </onEnter>	
		<condition name="WaitTick" waitTick="8000">
			<transition state="엔딩대사블리체1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>	
	
   <state name="엔딩대사블리체1"> 
        <onEnter>
			<action name="SetNpcEmotionSequence" arg1="21" arg2="Talk_A" />		
			<action name="AddCinematicTalk" npcID="11003533" illustID="Bliche_normal" msg="$52010055_QD__52010055__35$" duration="3000" align="right"/>
			<action name="AddCinematicTalk" npcID="11003533" illustID="Bliche_normal" msg="$52010055_QD__52010055__36$" duration="5000" align="right"/>	
        </onEnter>	
		<condition name="WaitTick" waitTick="8000">
			<transition state="엔딩연출종료1"/>
		</condition>
		<onExit> 			
        </onExit>
    </state>

    <state name="엔딩연출종료1">
        <onEnter>
			<action name="몬스터소멸시킨다" arg1="all"/>
			<action name="SetSceneSkip" arg1="" arg2=""/>				
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state="맵이동"/>
		</condition>
    </state>	
	
    <state name="맵이동">
        <onEnter>
			<action name="카메라리셋" interpolationTime="0.0"/>
 			<action name="VisibleMyPC" isVisible="1" /> <!-- 캐릭터 보임-->			
			<action name="연출UI를설정한다" arg1="0"/>
			<action name="연출UI를설정한다" arg1="2"/>		
			<action name="업적이벤트를발생시킨다" arg1="9002" arg2="trigger" arg3="rescueskyfortress" />		
			<action name="SetOnetimeEffect" id="12" enable="0" path="BG/Common/ScreenMask/Eff_CameraMasking_SlowFade.xml"/> 			
			<action name="유저를이동시킨다" arg1="52010052" arg2=""/>	<!-- 스카이 포트리스 작전실로 텔레포트 -->
        </onEnter>	
		<condition name="WaitTick" waitTick="1000">
			<transition state=""/>
		</condition>
		<onExit> 			
        </onExit>		
    </state>
	
<!--     <state name="실패선언">
        <onEnter>
			<action name="카메라리셋" interpolationTime="0.0"/>
			<action name="DungeonFail"/>
 			<action name="VisibleMyPC" isVisible="1" /> 	
			<action name="연출UI를설정한다" arg1="0"/>
			<action name="연출UI를설정한다" arg1="2"/>
        </onEnter>	
		<condition name="WaitTick" waitTick="1000"> 
			<transition state=""/>
		</condition>
		<onExit> 			
        </onExit>		
    </state>	-->		
	
</ms2>